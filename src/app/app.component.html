<div class="app-container" [class.dark-mode]="isDarkTheme">
  <div [ngClass]="{'dark-mode': isDarkTheme}" 
       style="background-color: #1976d2; padding: 0; width: 100%; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <div style="position: relative; padding: 15px 100px; display: flex; justify-content: space-between; align-items: center;">
      <h1 style="color: white; 
           font-size: 58px; 
           margin: 0; 
           text-align: center; 
           flex-grow: 1; 
           font-family: Copperplate, 'Copperplate Gothic Bold', serif;
           font-weight: 700;
           font-style: italic;
           letter-spacing: 3px;
           text-transform: uppercase;
           text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);">
  FITNESS TRACKER
</h1>

      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="display: flex; gap: 15px; border-right: 1px solid rgba(255,255,255,0.3); padding-right: 20px;">
          <a href="https://www.linkedin.com/in/akash-ghosh-7b6b7127a/" 
             target="_blank" 
             style="color: white; text-decoration: none; opacity: 0.8; transition: opacity 0.2s, transform 0.2s; display: flex; align-items: center;">
            <i class="fab fa-linkedin" style="font-size: 22px;"></i>
          </a>
          <a href="https://github.com/akashgh003" 
             target="_blank" 
             style="color: white; text-decoration: none; opacity: 0.8; transition: opacity 0.2s, transform 0.2s; display: flex; align-items: center;">
            <i class="fab fa-github" style="font-size: 22px;"></i>
          </a>
        </div>

        <button (click)="toggleTheme()" 
                style="background: none; border: none; color: white; cursor: pointer; padding: 8px; border-radius: 50%; transition: background-color 0.3s; opacity: 0.8; hover:background-color: rgba(255,255,255,0.1); hover:opacity: 1;">
          <i [class]="isDarkTheme ? 'fas fa-sun' : 'fas fa-moon'" style="font-size: 22px;"></i>
        </button>

        <button (click)="toggleMenu()"
                style="background: none; border: none; color: white; cursor: pointer; padding: 8px; border-radius: 50%; transition: background-color 0.3s; opacity: 0.8; hover:background-color: rgba(255,255,255,0.1); hover:opacity: 1;">
          <i class="fas fa-bars" style="font-size: 22px;"></i>
        </button>

        <div *ngIf="showMenu" 
             [@dropdownAnimation]
             class="card"
             style="position: absolute; top: 100%; right: 40px; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); min-width: 180px; margin-top: 10px; overflow: hidden; z-index: 1000;">
          <button (click)="showHome()" 
                  style="display: flex; width: 100%; align-items: center; padding: 12px 16px; border: none; background: none; cursor: pointer; color: #374151; transition: background-color 0.3s; hover:background-color: #f3f4f6;">
            <i class="fas fa-home" style="margin-right: 12px; font-size: 16px;"></i> 
            <span style="font-size: 14px;">Home</span>
          </button>
          <button (click)="toggleStats()" 
                  style="display: flex; width: 100%; align-items: center; padding: 12px 16px; border: none; background: none; cursor: pointer; color: #374151; transition: background-color 0.3s; hover:background-color: #f3f4f6;">
            <i class="fas fa-chart-bar" style="margin-right: 12px; font-size: 16px;"></i> 
            <span style="font-size: 14px;">Stats</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Home View -->
  <div *ngIf="!isStatsView" class="form-field" style="padding: 40px 80px;">
     
    <div>
      <h2 style="font-size: 28px; margin-bottom: 40px; font-weight: normal;">Add New Workout</h2>
      
      <div style="margin-bottom: 40px;">
        <div class="form-field" style="background-color: #f3f4f6; padding: 20px; border-radius: 4px; width: 400px;">
          <label style="display: block; color: #4B5563; font-size: 16px; margin-bottom: 10px;">User Name*</label>
          <input type="text" 
                 [(ngModel)]="userName" 
                 placeholder="Smith"
                 style="width: 100%; border: none; background: none; outline: none; font-size: 18px; color: #111827; border-bottom: 1px solid #E5E7EB;">
        </div>
      </div>

      <div style="display: flex; gap: 20px; margin-bottom: 40px;">
        <div class="form-field" style="background-color: #f3f4f6; padding: 20px; border-radius: 4px; flex: 1;">
          <label style="display: block; color: #4B5563; font-size: 16px; margin-bottom: 10px;">Workout Type*</label>
          <select [(ngModel)]="workoutType" 
                  style="width: 100%; border: none; background: none; outline: none; font-size: 18px; color: #111827; border-bottom: 1px solid #E5E7EB; appearance: none;">
            <option value="Cycling">Cycling</option>
            <option value="Running">Running</option>
            <option value="Swimming">Swimming</option>
            <option value="Yoga">Yoga</option>
          </select>
        </div>

        <div class="form-field" style="background-color: #f3f4f6; padding: 20px; border-radius: 4px; flex: 1;">
          <label style="display: block; color: #4B5563; font-size: 16px; margin-bottom: 10px;">Workout Minutes*</label>
          <input type="number" 
                 [(ngModel)]="workoutMinutes" 
                 placeholder="60"
                 style="width: 100%; border: none; background: none; outline: none; font-size: 18px; color: #111827; border-bottom: 1px solid #E5E7EB;">
        </div>
      </div>

      <button (click)="addWorkout()" 
              class="primary"
              style="color: #2563eb; background: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 16px; font-weight: 500; box-shadow: 0 2px 4px rgba(0,0,0,0.1); cursor: pointer;">
        Add Workout
      </button>
    </div>

    <div style="margin-top: 60px;">
      <h2 style="font-size: 28px; margin-bottom: 40px; font-weight: normal;">Workout List</h2>
      
      <div style="display: flex; gap: 20px; margin-bottom: 30px;">
        <div class="form-field" style="background-color: #f3f4f6; padding: 20px; border-radius: 4px; flex: 1;">
          <input type="text" 
                 [(ngModel)]="searchTerm" 
                 placeholder="Search"
                 style="width: 100%; border: none; background: none; outline: none; font-size: 16px; color: #111827; border-bottom: 1px solid #E5E7EB;">
        </div>

        <div class="form-field" style="background-color: #f3f4f6; padding: 20px; border-radius: 4px; flex: 1;">
          <select [(ngModel)]="filterType" 
                  style="width: 100%; border: none; background: none; outline: none; font-size: 16px; color: #111827; border-bottom: 1px solid #E5E7EB; appearance: none;">
            <option value="">All</option>
            <option value="Running">Running</option>
            <option value="Cycling">Cycling</option>
            <option value="Swimming">Swimming</option>
            <option value="Yoga">Yoga</option>
          </select>
        </div>
      </div>

      <div class="card" style="background: white; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="border-bottom: 1px solid #E5E7EB;">
              <th style="text-align: left; padding: 20px; font-weight: 500; color: #111827;">Name</th>
              <th style="text-align: left; padding: 20px; font-weight: 500; color: #111827;">Workouts</th>
              <th style="text-align: left; padding: 20px; font-weight: 500; color: #111827;">Number of Workouts</th>
              <th style="text-align: left; padding: 20px; font-weight: 500; color: #111827;">Total Workout Minutes</th>
              <th style="width: 50px;"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsers | slice:(page-1)*pageSize:page*pageSize" 
                style="border-bottom: 1px solid #E5E7EB;">
              <td style="padding: 20px; color: #111827;">{{user.name}}</td>
              <td style="padding: 20px; color: #6B7280;">{{getWorkoutTypes(user)}}</td>
              <td style="padding: 20px; color: #6B7280;">{{user.workouts.length}}</td>
              <td style="padding: 20px; color: #6B7280;">{{getTotalMinutes(user)}}</td>
              <td style="padding: 20px; text-align: right;">
                <button (click)="deleteUser(user.id)" 
                        style="background: none; border: none; color: #EF4444; cursor: pointer;">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
            <tr *ngIf="users.length === 0">
              <td colspan="5" style="text-align: center; padding: 20px; color: #6B7280;">No workouts added yet</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="users.length > 0" style="display: flex; justify-content: center; align-items: center; padding: 20px; gap: 10px;">
          <button (click)="previousPage()"
                  [disabled]="page === 1"
                  style="padding: 8px 16px; border: 1px solid #E5E7EB; background: white; color: #6B7280; border-radius: 4px;">
            Â« Previous
          </button>
          <button style="padding: 8px 16px; border: 1px solid #2563EB; background: white; color: #2563EB; border-radius: 4px;">
            1
          </button>
          <button style="padding: 8px 16px; border: 1px solid #E5E7EB; background: white; color: #6B7280; border-radius: 4px;">
            2
          </button>
          <button (click)="nextPage()"
                  [disabled]="page * pageSize >= filteredUsers.length"
                  style="padding: 8px 16px; border: 1px solid #E5E7EB; background: white; color: #6B7280; border-radius: 4px;">
            Next Â»
          </button>
          <span style="margin-left: 20px; color: #6B7280;">Items per page:</span>
          <select [(ngModel)]="pageSize" 
                  style="padding: 8px; border: 1px solid #E5E7EB; border-radius: 4px; color: #6B7280;">
            <option [value]="5">5</option>
            <option [value]="10">10</option>
            <option [value]="20">20</option>
          </select>
        </div>
      </div>
    </div>
  </div>

<div *ngIf="isStatsView" style="padding: 40px 80px;">
  <div *ngIf="showTooltip" 
       (click)="hideTooltip()"
       style="position: fixed; 
              top: 0; 
              left: 0; 
              right: 0; 
              bottom: 0; 
              background: rgba(0, 0, 0, 0.5); 
              z-index: 1000;
              display: flex;
              justify-content: center;
              align-items: center;">
    <div class="tooltip-message"
     style="position: absolute;
            top: 220px;
            right: 60px;
            background: white;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            min-width: 250px;
            animation: fadeIn 0.3s ease-out;">
      <div style="position: relative;">
        <span style="font-size: 14px; color: #374151;">
          Use the toggle switch to get a better view of stats about the user
        </span>
        <div style="position: absolute; 
              top: -25px;
              right: 20px;
              transform: rotate(0deg);
              font-size: 20px;">
    ð
  </div>
      </div>
    </div>
  </div>

  <div style="display: flex; gap: 40px;">
    <div class="card" style="width: 300px; background: white !important; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
      <h3 style="margin: 0 0 20px 0; font-size: 20px; color: #111827;">Users</h3>
      <div *ngFor="let user of users" 
           (click)="selectUser(user)"
           [class.selected]="selectedUser?.id === user.id"
           style="padding: 12px; cursor: pointer; border-radius: 4px; margin-bottom: 8px; color: #111827;"
           [style.background-color]="selectedUser?.id === user.id ? '#F3F4F6' : 'transparent'">
        {{user.name}}
      </div>
    </div>

    <div class="card" style="flex: 1; background: white !important; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 20px;">
      <div *ngIf="selectedUser">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h2 style="margin: 0; font-size: 24px; color: #111827;">
            {{selectedUser.name}}'s workout progress
          </h2>
          
          <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px; overflow: hidden;">
            <input type="checkbox" 
                   [checked]="showCircularStats"
                   (change)="toggleStatsView()"
                   style="opacity: 0; width: 0; height: 0;">
            <span style="position: absolute; 
                         cursor: pointer; 
                         top: 0; 
                         left: 0; 
                         right: 0; 
                         bottom: 0; 
                         background-color: #E5E7EB; 
                         transition: all 0.4s ease;
                         border-radius: 34px;
                         box-shadow: inset 0 0 2px rgba(0,0,0,0.1);">
              <span style="position: absolute; 
                           content: '';
                           height: 26px; 
                           width: 26px; 
                           left: 4px; 
                           bottom: 4px; 
                           background-color: white;
                           transition: all 0.4s ease;
                           border-radius: 50%;
                           box-shadow: 0 2px 4px rgba(0,0,0,0.2);"
                    [style.transform]="showCircularStats ? 'translateX(26px)' : 'translateX(0)'">
              </span>
            </span>
          </label>
        </div>

        <div *ngIf="!showCircularStats" style="height: 400px;">
          <canvas #workoutChart></canvas>
        </div>

        <div *ngIf="showCircularStats" 
             style="display: flex; justify-content: center; align-items: center; height: 400px;">
          <div style="position: relative; width: 300px; height: 300px;">
            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; 
                        background: conic-gradient(from 0deg, #10B981 {{getProgressPercentage()}}%, #3B82F6 {{getProgressPercentage()}}%, #3B82F6 100%);">
            </div>
            
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; 
                        background: #111827; width: 80%; height: 80%; border-radius: 50%; display: flex; 
                        flex-direction: column; justify-content: center; align-items: center;">
              <div style="font-size: 48px; font-weight: bold; color: white;">
                {{getTotalMinutes(selectedUser)}}
              </div>
              <div style="font-size: 16px; color: #9CA3AF;">
                Total Minutes
              </div>
              <div style="font-size: 14px; color: #6B7280; margin-top: 10px;">
                {{getWorkoutTypes(selectedUser)}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="!selectedUser" style="text-align: center; color: #6B7280; padding: 40px;">
        Select a user to view their progress
      </div>
    </div>
  </div>
</div>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .tooltip-message {
    animation: fadeIn 0.3s ease-out;
  }
  
  .switch input:checked + span {
    background-color: #3B82F6;
  }
  
  .card {
    transition: all 0.3s ease;
  }
  </style>